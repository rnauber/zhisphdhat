{"entries":[{"timestamp":1771744313712,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":185,"diffs":[[1,"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":289,"diffs":[[1,"\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":199,"length1":39,"diffs":[[1,"        \"README.md\"\n"]]},{"start1":226,"length1":31,"diffs":[[1,"    \"additionalFilePaths\": []\n"]]}]},{"type":"added","filename":"main.py","value":"from microbit import *\nimport music\n\n# Set tempo only with bpm\nmusic.set_tempo(bpm=92)\n\nmelody = music.stringPlayable(    'C4:4 C4:4  G3:4  C4:4  R:2 A#3:4  A#3:4  G3:4  A#3:4  R:2 C4:4  C4:4  G3:4  C4:4  R:2 A#3:4  A#3:4  G3:4  F3:8',120)\n\n# Add required playback parameters\nmusic.play(melody, playbackMode=music.PlaybackMode.IN_BACKGROUND)\n"}]},{"timestamp":1771744843465,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":372,"diffs":[[1,"//  Set tempo only with bpm\nmusic.setTempo(92)\nlet melody = music.stringPlayable(\"C4:4 C4:4  G3:4  C4:4  R:2 A#3:4  A#3:4  G3:4  A#3:4  R:2 C4:4  C4:4  G3:4  C4:4  R:2 A#3:4  A#3:4  G3:4  F3:8\", 120)\n//  Add required playback parameters\n"]]}]},{"type":"edited","filename":"main.py","patch":[{"start1":0,"length1":18,"diffs":[[1,""]]},{"start1":37,"length1":207,"diffs":[[1,"# Set tempo only with bpm\nmusic.set_tempo(bpm=92)\n"]]},{"start1":88,"length1":99,"diffs":[[1,"melody = music.stringPlayable(    'C4:4 C4:4  G3:4  C4:4  R:2 A#3:4  A#3:4  G3:4  A#3:4  R:2 C4:4  C4:4  G3:4  C4:4  R:2 A#3:4  A#3:4  G3:4  F3:8',120)\n"]]},{"start1":241,"length1":106,"diffs":[[1,"# Add required playback parameters\nmusic.play(melody, playbackMode=music.PlaybackMode.IN_BACKGROUND)\n"]]}]}]},{"timestamp":1771745347970,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.py","patch":[{"start1":123,"length1":993,"diffs":[[1,"MELODY_STR = (\n    \"C5:4 C5 D5 D#5 D5:8 C5:8 R:4 \"\n    \"C5:4 C5 D5 D#5 D5:8 C5:8 R:4 \"\n    \"D#5:8 G5:8 D#5:6 D#5:4 F5:4 D#5:4 D5:8 C5:8\"\n"]]}]}]},{"timestamp":1771745980481,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":90,"length1":996,"diffs":[[1,"let MELODY_STR = \"C5:4 C5 D5 D#5 D5:8 C5:8 R:4 C5:4 C5 D5 D#5 D5:8 C5:8 R:4 D#5:8 G5:8 D#5:6 D#5:4 F5:4 D#5:4 D5:8 C5:8\"\n"]]}]}]},{"timestamp":1771745980553,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":20,"length1":39,"diffs":[[1,"//  Short lead line adapted from your MIDI (simplified + monophonic).\n"]]},{"start1":1086,"length1":51,"diffs":[[1,"//  Convert to a Playable at the tempo you want (bpm).\nlet melody = music.stringPlayable(MELODY_STR, 92)\n//  Play in the background (MakeCode's playback modes).\n"]]}]},{"type":"edited","filename":"main.py","patch":[{"start1":55,"length1":1076,"diffs":[[1,"# Short lead line adapted from your MIDI (simplified + monophonic).\nMELODY_STR = (\"A#4:27 C5:1 R:1 C5:1 R:1 C3:19 R:12 A#4:1 R:1 C5:1 R:1 C5:1 R:1 C3:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:4 C7:1 R:1 D7:1 R:1 A#6:1 R:1 G6:1 R:1 G6:4 R:1 F6:1 R:1 G6:4 R:9 C7:1 R:1 C7:1 R:1 C7:1 R:1 D7:1 R:1 D#7:1 R:1 D7:4 A#4:1 R:1 C7:1 R:1 C5:1 R:1 D#7:1 R:3 D#7:1 R:3 D#7:1 R:1 D#7:1 R:1 F7:1 R:1 D#7:1 R:1 D7:1 R:3 D7:1 R:7 C7:1 R:1 D7:1 R:1 G7:1 R:3 G7:1 R:3 D#7:1 R:1 D#7:1 R:1 F7:1 R:1 D#7:1 R:1 G7:1 R:3 G7:1 R:5 G7:1 R:1 F7:1 R:1 D#7:1 R:3 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:5 C7:1 R:1 B6:1 R:1 C7:1 R:1 D7:1 R:3 G7:1 R:3 F7:1 R:1 D#7:1 R:1 D#6:1 R:1 D#7:1 R:1 D#7:1 R:1 D#7:1 R:1 D#7:1 R:5 D#7:1 R:1 F7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:11 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 B6:1 R:1 C7:1 R:1 D7:1 R:4 D#7:1 R:1 F7:1 R:1 G7:1 R:1 G7:1 R:6 F7:1 D#7:1 F7:1 D#7:1 R:6 G7:1 R:1 G#7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:3 C6:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:3 C7:1 R:1 D7:1 R:1 A#6:1 R:1 G6:1 R:1 G6:1 R:2 F6:1 R:1 G6:1\"\n)\n\n# Convert to a Playable at the tempo you want (bpm).\nmelody = music.stringPlayable(MELODY_STR, 92)\n\n# Play in the background (MakeCode's playback modes).\n"]]}]}]},{"timestamp":1771746169111,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.py","patch":[{"start1":92,"length1":991,"diffs":[[1,"MELODY_STR = \"A#4:27 C5:1 R:1 C5:1 R:1 C3:19 R:12 A#4:1 R:1 C5:1 R:1 C5:1 R:1 C3:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:4 C7:1 R:1 D7:1 R:1 A#6:1 R:1 G6:1 R:1 G6:4 R:1 F6:1 R:1 G6:4 R:9 C7:1 R:1 C7:1 R:1 C7:1 R:1 D7:1 R:1 D#7:1 R:1 D7:4 A#4:1 R:1 C7:1 R:1 C5:1 R:1 D#7:1 R:3 D#7:1 R:3 D#7:1 R:1 D#7:1 R:1 F7:1 R:1 D#7:1 R:1 D7:1 R:3 D7:1 R:7 C7:1 R:1 D7:1 R:1 G7:1 R:3 G7:1 R:3 D#7:1 R:1 D#7:1 R:1 F7:1 R:1 D#7:1 R:1 G7:1 R:3 G7:1 R:5 G7:1 R:1 F7:1 R:1 D#7:1 R:3 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:5 C7:1 R:1 B6:1 R:1 C7:1 R:1 D7:1 R:3 G7:1 R:3 F7:1 R:1 D#7:1 R:1 D#6:1 R:1 D#7:1 R:1 D#7:1 R:1 D#7:1 R:1 D#7:1 R:5 D#7:1 R:1 F7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:11 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 B6:1 R:1 C7:1 R:1 D7:1 R:4 D#7:1 R:1 F7:1 R:1 G7:1 R:1 G7:1 R:6 F7:1 D#7:1 F7:1 D#7:1 R:6 G7:1 R:1 G#7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:3 C6:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:3 C7:1 R:1 D7:1 R:1 A#6:1 R:1 G6:1 R:1 G6:1 R:2 F6:1 R:1 G6:1\"\n"]]}]}]},{"timestamp":1771746989374,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":59,"length1":995,"diffs":[[1,"let MELODY_STR = \"A#4:27 C5:1 R:1 C5:1 R:1 C3:19 R:12 A#4:1 R:1 C5:1 R:1 C5:1 R:1 C3:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:4 C7:1 R:1 D7:1 R:1 A#6:1 R:1 G6:1 R:1 G6:4 R:1 F6:1 R:1 G6:4 R:9 C7:1 R:1 C7:1 R:1 C7:1 R:1 D7:1 R:1 D#7:1 R:1 D7:4 A#4:1 R:1 C7:1 R:1 C5:1 R:1 D#7:1 R:3 D#7:1 R:3 D#7:1 R:1 D#7:1 R:1 F7:1 R:1 D#7:1 R:1 D7:1 R:3 D7:1 R:7 C7:1 R:1 D7:1 R:1 G7:1 R:3 G7:1 R:3 D#7:1 R:1 D#7:1 R:1 F7:1 R:1 D#7:1 R:1 G7:1 R:3 G7:1 R:5 G7:1 R:1 F7:1 R:1 D#7:1 R:3 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:5 C7:1 R:1 B6:1 R:1 C7:1 R:1 D7:1 R:3 G7:1 R:3 F7:1 R:1 D#7:1 R:1 D#6:1 R:1 D#7:1 R:1 D#7:1 R:1 D#7:1 R:1 D#7:1 R:5 D#7:1 R:1 F7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:11 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 B6:1 R:1 C7:1 R:1 D7:1 R:4 D#7:1 R:1 F7:1 R:1 G7:1 R:1 G7:1 R:6 F7:1 D#7:1 F7:1 D#7:1 R:6 G7:1 R:1 G#7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:3 C6:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:3 C7:1 R:1 D7:1 R:1 A#6:1 R:1 G6:1 R:1 G6:1 R:2 F6:1 R:1 G6:1\"\n"]]}]}]},{"timestamp":1771746989463,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":59,"length1":994,"diffs":[[1,"let MELODY_STR = \"A#4:2 C5:1 R:1 C5:1 R:1 C3:19 R:12 A#4:1 R:1 C5:1 R:1 C5:1 R:1 C3:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:4 C7:1 R:1 D7:1 R:1 A#6:1 R:1 G6:1 R:1 G6:4 R:1 F6:1 R:1 G6:4 R:9 C7:1 R:1 C7:1 R:1 C7:1 R:1 D7:1 R:1 D#7:1 R:1 D7:4 A#4:1 R:1 C7:1 R:1 C5:1 R:1 D#7:1 R:3 D#7:1 R:3 D#7:1 R:1 D#7:1 R:1 F7:1 R:1 D#7:1 R:1 D7:1 R:3 D7:1 R:7 C7:1 R:1 D7:1 R:1 G7:1 R:3 G7:1 R:3 D#7:1 R:1 D#7:1 R:1 F7:1 R:1 D#7:1 R:1 G7:1 R:3 G7:1 R:5 G7:1 R:1 F7:1 R:1 D#7:1 R:3 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:5 C7:1 R:1 B6:1 R:1 C7:1 R:1 D7:1 R:3 G7:1 R:3 F7:1 R:1 D#7:1 R:1 D#6:1 R:1 D#7:1 R:1 D#7:1 R:1 D#7:1 R:1 D#7:1 R:5 D#7:1 R:1 F7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:11 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 B6:1 R:1 C7:1 R:1 D7:1 R:4 D#7:1 R:1 F7:1 R:1 G7:1 R:1 G7:1 R:6 F7:1 D#7:1 F7:1 D#7:1 R:6 G7:1 R:1 G#7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:3 C6:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:3 C7:1 R:1 D7:1 R:1 A#6:1 R:1 G6:1 R:1 G6:1 R:2 F6:1 R:1 G6:1\"\n"]]}]},{"type":"edited","filename":"main.py","patch":[{"start1":55,"length1":3,"diffs":[[1,""]]},{"start1":92,"length1":990,"diffs":[[1,"MELODY_STR = \"A#4:2 C5:1 R:1 C5:1 R:1 C3:19 R:12 A#4:1 R:1 C5:1 R:1 C5:1 R:1 C3:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:4 C7:1 R:1 D7:1 R:1 A#6:1 R:1 G6:1 R:1 G6:4 R:1 F6:1 R:1 G6:4 R:9 C7:1 R:1 C7:1 R:1 C7:1 R:1 D7:1 R:1 D#7:1 R:1 D7:4 A#4:1 R:1 C7:1 R:1 C5:1 R:1 D#7:1 R:3 D#7:1 R:3 D#7:1 R:1 D#7:1 R:1 F7:1 R:1 D#7:1 R:1 D7:1 R:3 D7:1 R:7 C7:1 R:1 D7:1 R:1 G7:1 R:3 G7:1 R:3 D#7:1 R:1 D#7:1 R:1 F7:1 R:1 D#7:1 R:1 G7:1 R:3 G7:1 R:5 G7:1 R:1 F7:1 R:1 D#7:1 R:3 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:5 C7:1 R:1 B6:1 R:1 C7:1 R:1 D7:1 R:3 G7:1 R:3 F7:1 R:1 D#7:1 R:1 D#6:1 R:1 D#7:1 R:1 D#7:1 R:1 D#7:1 R:1 D#7:1 R:5 D#7:1 R:1 F7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:11 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 B6:1 R:1 C7:1 R:1 D7:1 R:4 D#7:1 R:1 F7:1 R:1 G7:1 R:1 G7:1 R:6 F7:1 D#7:1 F7:1 D#7:1 R:6 G7:1 R:1 G#7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:3 C6:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:3 C7:1 R:1 D7:1 R:1 A#6:1 R:1 G6:1 R:1 G6:1 R:2 F6:1 R:1 G6:1\"\n"]]}]}]},{"timestamp":1771747362109,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":25119,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\"></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":20,"length1":2856,"diffs":[[1,"// https://onlinesequencer.net/1631218\nlet MELODY_STR = \"A#3:2 C4:1 R:1 C4:1 R:1 C2:1 R:12 A#3:1 R:1 C4:1 R:1 C4:1 R:1 C2:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:4 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:4 R:1 F5:1 R:1 G5:4 R:9 C6:1 R:1 C6:1 R:1 C6:1 R:1 D6:1 R:1 D#6:1 R:1 D6:4 A#3:1 R:1 C6:1 R:1 C4:1 R:1 D#6:1 R:3 D#6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 D6:1 R:3 D6:1 R:7 C6:1 R:1 D6:1 R:1 G6:1 R:3 G6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 G6:1 R:3 G6:1 R:5 G6:1 R:1 F6:1 R:1 D#6:1 R:3 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:5 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:3 G6:1 R:3 F6:1 R:1 D#6:1 R:1 D#5:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:5 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:11 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:4 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G6:1 R:6 F6:1 D#6:1 F6:1 D#6:1 R:6 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:3 C5:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:3 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:1 R:2 F5:1 R:1 G5:1\"\nlet melody = music.stringPlayable(MELODY_STR, 120)\nmusic.play(melody, music.PlaybackMode.InBackground)\n"]]}]},{"type":"edited","filename":"main.py","patch":[{"start1":18,"length1":790,"diffs":[[1,"from microbit import *\nimport music\n"]]},{"start1":55,"length1":220,"diffs":[[1,""]]},{"start1":56,"length1":114,"diffs":[[1,""]]},{"start1":57,"length1":218,"diffs":[[1,""]]},{"start1":58,"length1":1480,"diffs":[[1,"#https://onlinesequencer.net/1631218\nMELODY_STR = \"A#3:2 C4:1 R:1 C4:1 R:1 C2:1 R:12 A#3:1 R:1 C4:1 R:1 C4:1 R:1 C2:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:4 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:4 R:1 F5:1 R:1 G5:4 R:9 C6:1 R:1 C6:1 R:1 C6:1 R:1 D6:1 R:1 D#6:1 R:1 D6:4 A#3:1 R:1 C6:1 R:1 C4:1 R:1 D#6:1 R:3 D#6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 D6:1 R:3 D6:1 R:7 C6:1 R:1 D6:1 R:1 G6:1 R:3 G6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 G6:1 R:3 G6:1 R:5 G6:1 R:1 F6:1 R:1 D#6:1 R:3 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:5 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:3 G6:1 R:3 F6:1 R:1 D#6:1 R:1 D#5:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:5 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:11 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:4 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G6:1 R:6 F6:1 D#6:1 F6:1 D#6:1 R:6 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:3 C5:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:3 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:1 R:2 F5:1 R:1 G5:1\"\nmelody = music.stringPlayable(MELODY_STR, 120)\nmusic.play(melody, music.PlaybackMode.IN_BACKGROUND)"]]}]}]},{"timestamp":1771747904328,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":88,"length1":58,"diffs":[[1,"    x = arr[0] % 5\n    y = Math.trunc(arr[0] / 5)\n"]]},{"start1":683,"length1":38,"diffs":[[1,"    \n"]]},{"start1":712,"length1":14,"diffs":[[1,""]]}]},{"type":"edited","filename":"main.py","patch":[{"start1":38,"length1":34,"diffs":[[1,"    global x, y, treasure_x, treasure_y\n"]]},{"start1":646,"length1":0,"diffs":[[1,"    global x, y, i\n"]]},{"start1":690,"length1":8,"diffs":[[1,""]]}]}]},{"timestamp":1771748477188,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":37457,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"e!YqMXw1!#Oy,phm/IL,\">treasure_x</variable><variable id=\"~%=F|Z0[D6|rRJfTL(q7\">treasure_y</variable><variable id=\"CUGk(Lh0%#s%.~4/v@xO\">x</variable><variable id=\"b;w=f/1yf]d6)^MTQb?F\">arr</variable><variable id=\"u{jvy_#UL{p;]/pUsp}i\">y</variable><variable id=\"7+,0AQQ(NlI]?HbE[t%,\">wait</variable><variable id=\"gz;=lYL0/vn^EC64I|19\">x1</variable><variable id=\"V-!B~3+jhJRB)d]j-iQf\">y1</variable><variable id=\"fzo*-9ESIErHA|=S+uYv\">x_add</variable><variable id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</variable><variable id=\"4GQ|m?;^ke!ju_EbASU1\">i</variable><variable id=\"z(IdM^+8_1=4_Qw.6AFI\">MELODY_STR</variable><variable id=\"zfbizB18r}nWI!l8%{=r\">melody</variable></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"e!YqMXw1!#Oy,phm/IL,\">treasure_x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~%=F|Z0[D6|rRJfTL(q7\">treasure_y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7+,0AQQ(NlI]?HbE[t%,\">wait</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">500</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"1\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"z(IdM^+8_1=4_Qw.6AFI\">MELODY_STR</field><comment pinned=\"false\" h=\"80\" w=\"160\">https://onlinesequencer.net/1631218</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">A#3:2 C4:1 R:1 C4:1 R:1 C2:1 R:12 A#3:1 R:1 C4:1 R:1 C4:1 R:1 C2:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:4 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:4 R:1 F5:1 R:1 G5:4 R:9 C6:1 R:1 C6:1 R:1 C6:1 R:1 D6:1 R:1 D#6:1 R:1 D6:4 A#3:1 R:1 C6:1 R:1 C4:1 R:1 D#6:1 R:3 D#6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 D6:1 R:3 D6:1 R:7 C6:1 R:1 D6:1 R:1 G6:1 R:3 G6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 G6:1 R:3 G6:1 R:5 G6:1 R:1 F6:1 R:1 D#6:1 R:3 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:5 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:3 G6:1 R:3 F6:1 R:1 D#6:1 R:1 D#5:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:5 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:11 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:4 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G6:1 R:6 F6:1 D#6:1 F6:1 D#6:1 R:6 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:3 C5:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:3 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:1 R:2 F5:1 R:1 G5:1</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"zfbizB18r}nWI!l8%{=r\">melody</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"music_string_playable\"><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"- - - - - - - - \"</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"z(IdM^+8_1=4_Qw.6AFI\">MELODY_STR</field></block></value><value name=\"bpm\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">120</field></shadow></value></block></value><next><block type=\"music_playable_play\"><field name=\"playbackMode\">music.PlaybackMode.InBackground</field><value name=\"toPlay\"><shadow type=\"music_string_playable\"></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"zfbizB18r}nWI!l8%{=r\">melody</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"793\" y=\"20\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value></block></next></block></statement></block></statement></block><block type=\"device_button_event\" x=\"1255\" y=\"20\"><field name=\"NAME\">Button.AB</field><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"1\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></statement></block><block type=\"device_button_event\" x=\"1676\" y=\"20\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement></block></statement></block><block type=\"device_forever\" x=\"2138\" y=\"20\"><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"generateImage\" functionid=\"=5P%#Rj?llY8ezftvE56\"></mutation><next><block type=\"function_call\"><mutation name=\"moveForward\" functionid=\"1!En`2DLGFDQ@g`vJ`SS\"></mutation></block></next></block></statement></block><block type=\"device_forever\" x=\"2375\" y=\"20\"><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"showTreasure\" functionid=\"NYNH;ItGhr+RMnl=q3e{\"></mutation></block></statement></block><block type=\"function_definition\" x=\"20\" y=\"537\"><mutation name=\"showTreasure\" functionid=\"NYNH;ItGhr+RMnl=q3e{\"></mutation><field name=\"function_name\">showTreasure</field><comment pinned=\"false\" h=\"80\" w=\"160\">MakeCode Python</comment><statement name=\"STACK\"><block type=\"device_plot\"><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"e!YqMXw1!#Oy,phm/IL,\">treasure_x</field></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~%=F|Z0[D6|rRJfTL(q7\">treasure_y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"CUGk(Lh0%#s%.~4/v@xO\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"u{jvy_#UL{p;]/pUsp}i\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"CUGk(Lh0%#s%.~4/v@xO\">x</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"e!YqMXw1!#Oy,phm/IL,\">treasure_x</field></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u{jvy_#UL{p;]/pUsp}i\">y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~%=F|Z0[D6|rRJfTL(q7\">treasure_y</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"value\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"e!YqMXw1!#Oy,phm/IL,\">treasure_x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~%=F|Z0[D6|rRJfTL(q7\">treasure_y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value></block></next></block></next></block></statement></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"867\" y=\"537\"><mutation name=\"moveForward\" functionid=\"1!En`2DLGFDQ@g`vJ`SS\"></mutation><field name=\"function_name\">moveForward</field><statement name=\"STACK\"><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7+,0AQQ(NlI]?HbE[t%,\">wait</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"gz;=lYL0/vn^EC64I|19\">x1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"V-!B~3+jhJRB)d]j-iQf\">y1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"gz;=lYL0/vn^EC64I|19\">x1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"gz;=lYL0/vn^EC64I|19\">x1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"gz;=lYL0/vn^EC64I|19\">x1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"gz;=lYL0/vn^EC64I|19\">x1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"V-!B~3+jhJRB)d]j-iQf\">y1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"V-!B~3+jhJRB)d]j-iQf\">y1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"V-!B~3+jhJRB)d]j-iQf\">y1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"V-!B~3+jhJRB)d]j-iQf\">y1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></statement><next><block type=\"array_insertAt\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"index\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"value\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"gz;=lYL0/vn^EC64I|19\">x1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"V-!B~3+jhJRB)d]j-iQf\">y1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></value><next><block type=\"array_removeat_statement\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"index\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1555\" y=\"537\"><mutation name=\"generateImage\" functionid=\"=5P%#Rj?llY8ezftvE56\"></mutation><field name=\"function_name\">generateImage</field><statement name=\"STACK\"><block type=\"device_clear_display\"><next><block type=\"device_while\"><value name=\"COND\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4GQ|m?;^ke!ju_EbASU1\">i</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO\"><block type=\"variables_set\"><field name=\"VAR\" id=\"CUGk(Lh0%#s%.~4/v@xO\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4GQ|m?;^ke!ju_EbASU1\">i</field></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"u{jvy_#UL{p;]/pUsp}i\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4GQ|m?;^ke!ju_EbASU1\">i</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></value><next><block type=\"device_plot\"><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"CUGk(Lh0%#s%.~4/v@xO\">x</field></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u{jvy_#UL{p;]/pUsp}i\">y</field></block></value><next><block type=\"variables_change\"><field name=\"VAR\" id=\"4GQ|m?;^ke!ju_EbASU1\">i</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></statement></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":201,"diffs":[[1,"//  MakeCode Python\nfunction showTreasure() {\n    \n    led.plot(treasure_x, treasure_y)\n    let x = arr[0] % 5\n    let y = Math.trunc(arr[0] / 5)\n    if (x == treasure_x && y == treasure_y) {\n        arr.push(arr[0])\n        treasure_x = randint(0, 4)\n        treasure_y = randint(0, 4)\n"]]},{"start1":293,"length1":36,"diffs":[[1,"    \n"]]},{"start1":300,"length1":581,"diffs":[[1,"\nfunction moveForward() {\n    \n    basic.pause(wait)\n    x1 = arr[0] % 5\n    y1 = Math.trunc(arr[0] / 5)\n    if (x1 + x_add < 0) {\n        x1 = 4\n    } else {\n        x1 = (x1 + x_add) % 5\n"]]},{"start1":495,"length1":170,"diffs":[[1,"    \n    if (y1 + y_add < 0) {\n        y1 = 4\n    } else {\n        y1 = (y1 + y_add) % 5\n    }\n    \n    arr.insertAt(0, x1 + y1 * 5)\n    arr.removeAt(arr.length - 1)\n"]]},{"start1":663,"length1":160,"diffs":[[1,"\nfunction generateImage() {\n    let x: number;\n    let y: number;\n    basic.clearScreen()\n    let i = 0\n    while (i <= arr.length - 1) {\n        x = arr[i] % 5\n        y = Math.trunc(arr[i] / 5)\n        led.plot(x, y)\n"]]},{"start1":903,"length1":17,"diffs":[[1,""]]},{"start1":905,"length1":115,"diffs":[[1,"\ninput.onButtonPressed(Button.A, function on_button_pressed_a() {\n    \n    if (x_add == 0) {\n        x_add = -1\n        y_add = 0\n    } else if (y_add == 0) {\n        x_add = 0\n        y_add = -1\n    }\n    \n"]]},{"start1":1115,"length1":290,"diffs":[[1,"input.onButtonPressed(Button.AB, function on_button_pressed_ab() {\n    \n    arr = [0]\n"]]},{"start1":1204,"length1":3067,"diffs":[[1,"input.onButtonPressed(Button.B, function on_button_pressed_b() {\n    \n    if (x_add == 0) {\n        x_add = 1\n        y_add = 0\n    } else if (y_add == 0) {\n        x_add = 0\n        y_add = 1\n"]]},{"start1":1403,"length1":0,"diffs":[[1,"    \n"]]},{"start1":1411,"length1":0,"diffs":[[1,"let i = 0\nlet x_add = 0\nlet y1 = 0\nlet x1 = 0\nlet y = 0\nlet x = 0\nlet arr : number[] = []\nlet wait = 0\nlet y_add = 0\nlet treasure_y = 0\nlet treasure_x = 0\ntreasure_x = randint(0, 4)\ntreasure_y = randint(0, 4)\ny_add = 1\nwait = 500\narr = [0]\n//  https://onlinesequencer.net/1631218\n// MELODY_STR = \"A#3:2 C4:1 R:1 C4:1 R:1 C2:1 R:12 A#3:1 R:1 C4:1 R:1 C4:1 R:1 C2:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:4 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:4 R:1 F5:1 R:1 G5:4 R:9 C6:1 R:1 C6:1 R:1 C6:1 R:1 D6:1 R:1 D#6:1 R:1 D6:4 A#3:1 R:1 C6:1 R:1 C4:1 R:1 D#6:1 R:3 D#6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 D6:1 R:3 D6:1 R:7 C6:1 R:1 D6:1 R:1 G6:1 R:3 G6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 G6:1 R:3 G6:1 R:5 G6:1 R:1 F6:1 R:1 D#6:1 R:3 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:5 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:3 G6:1 R:3 F6:1 R:1 D#6:1 R:1 D#5:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:5 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:11 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:4 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G6:1 R:6 F6:1 D#6:1 F6:1 D#6:1 R:6 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:3 C5:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:3 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:1 R:2 F5:1 R:1 G5:1\"\n// melody = music.string_playable(MELODY_STR, 120)\n// music.play(melody, music.PlaybackMode.IN_BACKGROUND)\nbasic.forever(function on_forever() {\n    generateImage()\n    moveForward()\n})\nbasic.forever(function on_forever2() {\n    showTreasure()\n})\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":245,"length1":35,"diffs":[[1,"    \"preferredEditor\": \"pyprj\"\n"]]}]},{"type":"edited","filename":"main.py","patch":[{"start1":0,"length1":490,"diffs":[[1,"# MakeCode Python\ndef showTreasure():\n    global treasure_x, treasure_y\n    led.plot(treasure_x, treasure_y)\n    x = arr[0] % 5\n    y = int(arr[0] / 5)\n    if x == treasure_x and y == treasure_y:\n        arr.append(arr[0])\n        treasure_x = randint(0, 4)\n        treasure_y = randint(0, 4)\ndef moveForward():\n    global x1, y1\n    basic.pause(wait)\n    x1 = arr[0] % 5\n    y1 = int(arr[0] / 5)\n    if x1 + x_add < 0:\n        x1 = 4\n    else:\n        x1 = (x1 + x_add) % 5\n    if y1 + y_add < 0:\n        y1 = 4\n    else:\n        y1 = (y1 + y_add) % 5\n    arr.insert_at(0, x1 + y1 * 5)\n    arr.remove_at(len(arr) - 1)\ndef generateImage():\n    basic.clear_screen()\n    i=0\n    while i <= len(arr) - 1:\n        x = arr[i] % 5\n        y = int(arr[i] / 5)\n        led.plot(x, y)\n        i += 1\n"]]},{"start1":819,"length1":16,"diffs":[[1,"    global x_add, y_add\n    if x_add == 0:\n        x_add = -1\n        y_add = 0\n    elif y_add == 0:\n        x_add = 0\n        y_add = -1\n"]]},{"start1":1013,"length1":712,"diffs":[[1,"def on_button_pressed_ab():\n    global arr\n    arr = [0]\ninput.on_button_pressed(Button.AB, on_button_pressed_ab)\n"]]},{"start1":1155,"length1":17,"diffs":[[1,"    global x_add, y_add\n    if x_add == 0:\n        x_add = 1\n        y_add = 0\n    elif y_add == 0:\n        x_add = 0\n        y_add = 1\n"]]},{"start1":1347,"length1":472,"diffs":[[1,""]]},{"start1":1353,"length1":1656,"diffs":[[1,"x_add = 0\ny1 = 0\nx1 = 0\ny = 0\nx = 0\narr: List[number] = []\nwait = 0\ny_add = 0\ntreasure_y = 0\ntreasure_x = 0\ntreasure_x = randint(0, 4)\ntreasure_y = randint(0, 4)\ny_add = 1\nwait = 500\narr = [0]\n# https://onlinesequencer.net/1631218\n#MELODY_STR = \"A#3:2 C4:1 R:1 C4:1 R:1 C2:1 R:12 A#3:1 R:1 C4:1 R:1 C4:1 R:1 C2:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:4 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:4 R:1 F5:1 R:1 G5:4 R:9 C6:1 R:1 C6:1 R:1 C6:1 R:1 D6:1 R:1 D#6:1 R:1 D6:4 A#3:1 R:1 C6:1 R:1 C4:1 R:1 D#6:1 R:3 D#6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 D6:1 R:3 D6:1 R:7 C6:1 R:1 D6:1 R:1 G6:1 R:3 G6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 G6:1 R:3 G6:1 R:5 G6:1 R:1 F6:1 R:1 D#6:1 R:3 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:5 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:3 G6:1 R:3 F6:1 R:1 D#6:1 R:1 D#5:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:5 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:11 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:4 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G6:1 R:6 F6:1 D#6:1 F6:1 D#6:1 R:6 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:3 C5:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:3 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:1 R:2 F5:1 R:1 G5:1\"\n#melody = music.string_playable(MELODY_STR, 120)\n#music.play(melody, music.PlaybackMode.IN_BACKGROUND)\n"]]},{"start1":2679,"length1":1187,"diffs":[[1,"def on_forever():\n    generateImage()\n    moveForward()\nbasic.forever(on_forever)\n\ndef on_forever2():\n    showTreasure()\nbasic.forever(on_forever2)\n"]]}]}]},{"timestamp":1771749073115,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":2506,"diffs":[[1,"function place_food () {\n    // ensure not on snake\n"]]},{"start1":71,"length1":157,"diffs":[[1,"        x22 = randint(0, W - 1)\n        y22 = randint(0, H - 1)\n        if (!(on_snake(x22, y22))) {\n            break;\n"]]},{"start1":201,"length1":9,"diffs":[[1,""]]},{"start1":207,"length1":0,"diffs":[[1,"    food[0] = x22\n    food[1] = y22\n"]]},{"start1":245,"length1":19,"diffs":[[1,"function next_head () {\n    x2 = snake[0][0]\n    y2 = snake[0][1]\n    let dx = dir_ == 1 ? 1 : (dir_ == 3 ? -1 : 0)\nlet dy = dir_ == 2 ? 1 : (dir_ == 0 ? -1 : 0)\nreturn [wrap(x2 + dx, W), wrap(y2 + dy, H)]\n}\n// --- Inputs (v2) ---\ninput.onButtonPressed(Button.A, function () {\n    turn_left()\n})\nfunction game_over () {\n    alive = false\n    basic.showIcon(IconNames.Skull)\n    music.stopAllSounds()\n}\nfunction draw () {\n"]]},{"start1":690,"length1":141,"diffs":[[1,"    // draw body (dim)\n    j = 1\n    while (j < snake.length) {\n        led.plotBrightness(snake[j][0], snake[j][1], 90)\n        j += 1\n"]]},{"start1":832,"length1":27,"diffs":[[1,"    // draw head (bright)\n"]]},{"start1":912,"length1":26,"diffs":[[1,"    // draw food (blink)\n"]]},{"start1":1004,"length1":368,"diffs":[[1,"function on_snake (x: number, y: number) {\n    while (i < snake.length) {\n        if (snake[i][0] == x && snake[i][1] == y) {\n            return true\n        }\n        i += 1\n    }\n    return false\n"]]},{"start1":1204,"length1":30,"diffs":[[1,"function turn_left () {\n    dir_ = (dir_ + 3) % 4\n}\ninput.onButtonPressed(Button.B, function () {\n    turn_right()\n})\nfunction reset_game () {\n"]]},{"start1":1404,"length1":28,"diffs":[[1,"    // start heading right\n"]]},{"start1":1537,"length1":229,"diffs":[[1,"input.onLogoEvent(TouchButtonEvent.Pressed, function () {\n"]]},{"start1":1615,"length1":17,"diffs":[[1,"function turn_right () {\n    dir_ = (dir_ + 1) % 4\n}\nlet growing = 0\nlet melody_started = false\nlet i = 0\nlet j = 0\nlet y22 = 0\nlet x22 = 0\nlet alive = false\nlet food: number[] = []\nbasic.showString(\"Hi Zhi!\")\nlet food_blink = false\nlet W = 0\nlet H = 0\nlet snake : number[][] = []\nlet dir_ = 0\nlet x2 = 0\nlet y2 = 0\n// Snake on micro:bit v2 (MakeCode Python)\n// Plays a melody when the snake length becomes > 5\n// --- Config ---\nlet TICK_MS = 300\n// movement speed (lower = faster)\nlet TEMPO_BPM = 120\n// melody tempo\n// Your melody (one octave lower)\nlet MELODY_STR = \"A#3:2 C4:1 R:1 C4:1 R:1 C2:1 R:12 A#3:1 R:1 C4:1 R:1 C4:1 R:1 C2:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:4 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:4 R:1 F5:1 R:1 G5:4 R:9 C6:1 R:1 C6:1 R:1 C6:1 R:1 D6:1 R:1 D#6:1 R:1 D6:4 A#3:1 R:1 C6:1 R:1 C4:1 R:1 D#6:1 R:3 D#6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 D6:1 R:3 D6:1 R:7 C6:1 R:1 D6:1 R:1 G6:1 R:3 G6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 G6:1 R:3 G6:1 R:5 G6:1 R:1 F6:1 R:1 D#6:1 R:3 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:5 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:3 G6:1 R:3 F6:1 R:1 D#6:1 R:1 D#5:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:5 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:11 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:4 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G6:1 R:6 F6:1 D#6:1 F6:1 D#6:1 R:6 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:3 C5:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:3 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:1 R:2 F5:1 R:1 G5:1\"\n// --- Game state ---\nW = 5\nH = 5\nsnake = [[0, 0]]\n// list of [x, y]; head at index 0\ndir_ = 1\n// 0=up, 1=right, 2=down, 3=left\nfood = [0, 0]\nalive = true\nfunction wrap(n: any, m: number): number {\n    return (n + m) % m\n}\n// --- Main ---\n"]]},{"start1":3413,"length1":100,"diffs":[[1,"// Run movement/game loop in background so inputs remain responsive\ncontrol.inBackground(function () {\n"]]},{"start1":3538,"length1":24,"diffs":[[1,"while (true) {\n"]]},{"start1":3574,"length1":0,"diffs":[[1,"            // Move one step\n"]]},{"start1":3632,"length1":107,"diffs":[[1,"            // Self collision?\n            if (on_snake(nh[0], nh[1])) {\n"]]},{"start1":3733,"length1":77,"diffs":[[1,""]]},{"start1":3754,"length1":30,"diffs":[[1,"                // Add head\n"]]},{"start1":3820,"length1":30,"diffs":[[1,"                // Eat?\n"]]},{"start1":3988,"length1":54,"diffs":[[1,"                // Grow or pop tail\n"]]},{"start1":4059,"length1":33,"diffs":[[1,"                    growing += 0 - 1\n"]]},{"start1":4183,"length1":140,"diffs":[[1,"                // Start melody the first time length exceeds 5\n                if (!(melody_started) && snake.length > 7) {\n"]]},{"start1":4515,"length1":100,"diffs":[[1,"                // Toggle food blink and redraw\n                food_blink = !(food_blink)\n"]]},{"start1":4643,"length1":13,"diffs":[[1,""]]},{"start1":4653,"length1":9,"diffs":[[1,""]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":87,"length1":0,"diffs":[[1,"        \"radio\": \"*\",\n"]]},{"start1":157,"length1":0,"diffs":[[1,"        \"main.blocks\",\n"]]},{"start1":199,"length1":0,"diffs":[[1,"        \"README.md\",\n"]]},{"start1":245,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]},{"type":"edited","filename":"main.py","patch":[{"start1":0,"length1":2299,"diffs":[[1,""]]},{"start1":18,"length1":0,"diffs":[[1,"    global x22, y22\n"]]},{"start1":80,"length1":139,"diffs":[[1,"        x22 = randint(0, W - 1)\n        y22 = randint(0, H - 1)\n        if not (on_snake(x22, y22)):\n"]]},{"start1":199,"length1":0,"diffs":[[1,"    food[0] = x22\n    food[1] = y22\ndef next_head():\n    global x2, y2\n    x2 = snake[0][0]\n    y2 = snake[0][1]\n    dx = 1 if dir_ == 1 else (-1 if dir_ == 3 else 0)\n    dy = 1 if dir_ == 2 else (-1 if dir_ == 0 else 0)\n    return [wrap(x2 + dx, W), wrap(y2 + dy, H)]\n# --- Inputs (v2) ---\n"]]},{"start1":491,"length1":0,"diffs":[[1,"def on_button_pressed_a():\n    turn_left()\ninput.on_button_pressed(Button.A, on_button_pressed_a)\n\ndef game_over():\n    global alive\n    alive = False\n    basic.show_icon(IconNames.SKULL)\n    music.stop_all_sounds()\n"]]},{"start1":719,"length1":0,"diffs":[[1,"    global j\n"]]},{"start1":779,"length1":109,"diffs":[[1,"    j = 1\n    while j < len(snake):\n        led.plot_brightness(snake[j][0], snake[j][1], 90)\n        j += 1\n"]]},{"start1":1062,"length1":0,"diffs":[[1,"def on_snake(x: number, y: number):\n    global i\n    while i < len(snake):\n        if snake[i][0] == x and snake[i][1] == y:\n            return True\n        i += 1\n    return False\ndef turn_left():\n    global dir_\n    dir_ = (dir_ + 3) % 4\n"]]},{"start1":1303,"length1":389,"diffs":[[1,"def on_button_pressed_b():\n    turn_right()\ninput.on_button_pressed(Button.B, on_button_pressed_b)\n"]]},{"start1":1532,"length1":36,"diffs":[[1,"    dir_ = 1\n    # start heading right\n"]]},{"start1":1676,"length1":176,"diffs":[[1,"def on_logo_pressed():\n"]]},{"start1":1716,"length1":55,"diffs":[[1,"input.on_logo_event(TouchButtonEvent.PRESSED, on_logo_pressed)\n"]]},{"start1":1780,"length1":0,"diffs":[[1,"def turn_right():\n    global dir_\n    dir_ = (dir_ + 1) % 4\ngrowing = 0\nmelody_started = False\ni = 0\nj = 0\ny2 = 0\nx2 = 0\ny22 = 0\nx22 = 0\nalive = False\nfood: List[number] = []\ndir_ = 0\nsnake: List[List[number]] = []\nH = 0\nW = 0\nfood_blink = False\n# Snake on micro:bit v2 (MakeCode Python)\n# Plays a melody when the snake length becomes > 5\n# --- Config ---\nTICK_MS = 300\n# movement speed (lower = faster)\nTEMPO_BPM = 120\n# melody tempo\n# Your melody (one octave lower)\nMELODY_STR = \"A#3:2 C4:1 R:1 C4:1 R:1 C2:1 R:12 A#3:1 R:1 C4:1 R:1 C4:1 R:1 C2:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:4 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:4 R:1 F5:1 R:1 G5:4 R:9 C6:1 R:1 C6:1 R:1 C6:1 R:1 D6:1 R:1 D#6:1 R:1 D6:4 A#3:1 R:1 C6:1 R:1 C4:1 R:1 D#6:1 R:3 D#6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 D6:1 R:3 D6:1 R:7 C6:1 R:1 D6:1 R:1 G6:1 R:3 G6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 G6:1 R:3 G6:1 R:5 G6:1 R:1 F6:1 R:1 D#6:1 R:3 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:5 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:3 G6:1 R:3 F6:1 R:1 D#6:1 R:1 D#5:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:5 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:11 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:4 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G6:1 R:6 F6:1 D#6:1 F6:1 D#6:1 R:6 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:3 C5:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:3 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:1 R:2 F5:1 R:1 G5:1\"\n# --- Game state ---\nW = 5\nH = 5\nsnake = [[0, 0]]\n# list of [x, y]; head at index 0\ndir_ = 1\n# 0=up, 1=right, 2=down, 3=left\nfood = [0, 0]\nalive = True\ndef wrap(n: any, m: number):\n    return (n + m) % m\n"]]},{"start1":3470,"length1":0,"diffs":[[1,"# Run movement/game loop in background so inputs remain responsive\n"]]},{"start1":3538,"length1":12,"diffs":[[1,"def on_in_background():\n"]]},{"start1":3643,"length1":0,"diffs":[[1,"            # Move one step\n"]]},{"start1":3700,"length1":103,"diffs":[[1,"            # Self collision?\n            if on_snake(nh[0], nh[1]):\n"]]},{"start1":3815,"length1":109,"diffs":[[1,"                # Add head\n                snake.insert_at(0, nh)\n                # Eat?\n                if nh[0] == food[0] and nh[1] == food[1]:\n                    growing += 1\n                    place_food()\n                # Grow or pop tail\n                if growing > 0:\n                    growing += 0 - 1\n"]]},{"start1":4154,"length1":873,"diffs":[[1,"                    snake.pop()\n                # Start melody the first time length exceeds 5\n                if not (melody_started) and len(snake) > 7:\n                    melody_started = True\n                    \n                    def _play():\n                        music.play_melody(MELODY_STR, TEMPO_BPM)\n                    control.in_background(_play)\n                    \n                # Toggle food blink and redraw\n                food_blink = not (food_blink)\n                draw()\n"]]},{"start1":4685,"length1":90,"diffs":[[1,"control.in_background(on_in_background)\n"]]}]},{"type":"removed","filename":"main.blocks","value":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"@wyaH+]GHHFEXQPEliGi\">x22</variable><variable id=\"8*D5rL5[~0fEG#XjED3~\">W</variable><variable id=\"J84iL+dX_)gTwYA|,Ej7\">y22</variable><variable id=\"=2G13Z8dsIG3,iuw9Dk+\">H</variable><variable id=\"NGGeK8KEI3pho(+xWes:\">food</variable><variable id=\"x[eHJ_S,/)s;R$J#4J-(\">x2</variable><variable id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</variable><variable id=\"eUiVXkbrVW/=M@PyBz%R\">y2</variable><variable id=\"KY2Flx0:~W2CzpE{%#T-\">alive</variable><variable id=\"N8;o?M6u:e88E7}49C4?\">j</variable><variable id=\"O+fA+fd_ORY?bdiy}VNy\">i</variable><variable id=\"C+#c}iSq}ZB?]LqN9c](\">dir_</variable><variable id=\"T0L`2B6_0+U^ktGBU3:r\">melody_started</variable><variable id=\";e{_vnwfpe4Xv8cf:0Iy\">growing</variable><variable id=\"zZ;$k19G7-E07RLK]U@(\">food_blink</variable><variable id=\"Y5gH^K_#4hil_0w8G#.Q\">nh</variable><variable id=\"mNCiXQf?/Zsx4(BuQQ=E\">TICK_MS</variable><variable id=\"I{6k`s_rwD3i2y03EV_8\">TEMPO_BPM</variable><variable id=\"R(/WxXZh-2PzgOi1+5$z\">MELODY_STR</variable></variables><block type=\"control_in_background\" x=\"773\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">Run movement/game loop in background so inputs remain responsive</comment><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let nh: number[];\" numlines=\"1\" declaredvars=\"nh\"></mutation><next><block type=\"device_while\"><value name=\"COND\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"KY2Flx0:~W2CzpE{%#T-\">alive</field></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"Y5gH^K_#4hil_0w8G#.Q\">nh</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move one step</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"next_head\" functionid=\"jgxx60LZSc!!D@hl?.#0\"></mutation></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Self collision?</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"function_call_output\"><mutation name=\"on_snake\" functionid=\"/Fwz:^7)CAKj8o*sz0zd\"><arg name=\"x\" id=\"8ton2z6mkpoqwfh0l28wa\" type=\"number\"></arg><arg name=\"y\" id=\"i4wll16qj4daazo104cf\" type=\"number\"></arg></mutation><value name=\"8ton2z6mkpoqwfh0l28wa\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Y5gH^K_#4hil_0w8G#.Q\">nh</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"i4wll16qj4daazo104cf\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Y5gH^K_#4hil_0w8G#.Q\">nh</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"game_over\" functionid=\"FtU!9*C/y;}O:M,;twlZ\"></mutation></block></statement><statement name=\"ELSE\"><block type=\"array_insertAt\"><comment pinned=\"false\" h=\"80\" w=\"160\">Add head</comment><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field></block></value><value name=\"index\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Y5gH^K_#4hil_0w8G#.Q\">nh</field></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Eat?</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Y5gH^K_#4hil_0w8G#.Q\">nh</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"NGGeK8KEI3pho(+xWes:\">food</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Y5gH^K_#4hil_0w8G#.Q\">nh</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"NGGeK8KEI3pho(+xWes:\">food</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\";e{_vnwfpe4Xv8cf:0Iy\">growing</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"function_call\"><mutation name=\"place_food\" functionid=\"Eft~QPg/Xl|AJIVCj56%\"></mutation></block></next></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Grow or pop tail</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";e{_vnwfpe4Xv8cf:0Iy\">growing</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\";e{_vnwfpe4Xv8cf:0Iy\">growing</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></statement><statement name=\"ELSE\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"_py.py_array_pop(snake)\" numlines=\"1\"></mutation></block></statement><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Start melody the first time length exceeds 5</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"T0L`2B6_0+U^ktGBU3:r\">melody_started</field></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T0L`2B6_0+U^ktGBU3:r\">melody_started</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"control.inBackground(function _play() {\" line1=\"                        music.playMelody(MELODY_STR, TEMPO_BPM)\" line2=\"                    })\" numlines=\"3\"></mutation></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"zZ;$k19G7-E07RLK]U@(\">food_blink</field><comment pinned=\"false\" h=\"80\" w=\"160\">Toggle food blink and redraw</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"zZ;$k19G7-E07RLK]U@(\">food_blink</field></block></value></block></value><next><block type=\"function_call\"><mutation name=\"draw\" functionid=\"948xe)ar~(mlEe%D7Q[8\"></mutation></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block></statement><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"mNCiXQf?/Zsx4(BuQQ=E\">TICK_MS</field></block></value></block></next></block></statement></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"37\" y=\"57\"><statement name=\"HANDLER\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">Hi Zhi!</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let food_blink = false\" numlines=\"1\" declaredvars=\"food_blink\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let W = 0\" numlines=\"1\" declaredvars=\"W\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let H = 0\" numlines=\"1\" declaredvars=\"H\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let snake : number[][] = []\" numlines=\"1\" declaredvars=\"snake\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let dir_ = 0\" numlines=\"1\" declaredvars=\"dir_\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x2 = 0\" numlines=\"1\" declaredvars=\"x2\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y2 = 0\" numlines=\"1\" declaredvars=\"y2\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"mNCiXQf?/Zsx4(BuQQ=E\">TICK_MS</field><comment pinned=\"false\" h=\"80\" w=\"160\">Snake on micro:bit v2 (MakeCode Python)\nPlays a melody when the snake length becomes &gt; 5\n--- Config ---</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"I{6k`s_rwD3i2y03EV_8\">TEMPO_BPM</field><comment pinned=\"false\" h=\"80\" w=\"160\">movement speed (lower = faster)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">120</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"R(/WxXZh-2PzgOi1+5$z\">MELODY_STR</field><comment pinned=\"false\" h=\"80\" w=\"160\">melody tempo\nYour melody (one octave lower)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">A#3:2 C4:1 R:1 C4:1 R:1 C2:1 R:12 A#3:1 R:1 C4:1 R:1 C4:1 R:1 C2:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:4 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:4 R:1 F5:1 R:1 G5:4 R:9 C6:1 R:1 C6:1 R:1 C6:1 R:1 D6:1 R:1 D#6:1 R:1 D6:4 A#3:1 R:1 C6:1 R:1 C4:1 R:1 D#6:1 R:3 D#6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 D6:1 R:3 D6:1 R:7 C6:1 R:1 D6:1 R:1 G6:1 R:3 G6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 G6:1 R:3 G6:1 R:5 G6:1 R:1 F6:1 R:1 D#6:1 R:3 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:5 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:3 G6:1 R:3 F6:1 R:1 D#6:1 R:1 D#5:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:5 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:11 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:4 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G6:1 R:6 F6:1 D#6:1 F6:1 D#6:1 R:6 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:3 C5:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:3 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:1 R:2 F5:1 R:1 G5:1</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"8*D5rL5[~0fEG#XjED3~\">W</field><comment pinned=\"false\" h=\"80\" w=\"160\">--- Game state ---</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"=2G13Z8dsIG3,iuw9Dk+\">H</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"1\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"C+#c}iSq}ZB?]LqN9c](\">dir_</field><comment pinned=\"false\" h=\"80\" w=\"160\">list of [x, y]; head at index 0</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"NGGeK8KEI3pho(+xWes:\">food</field><comment pinned=\"false\" h=\"80\" w=\"160\">0=up, 1=right, 2=down, 3=left</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"KY2Flx0:~W2CzpE{%#T-\">alive</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"function wrap(n: any, m: number): number {\" line1=\"    return (n + m) % m\" line2=\"}\" numlines=\"3\"></mutation><next><block type=\"function_call\"><mutation name=\"reset_game\" functionid=\"$g~y:Bx{XUA9*nQwWfwH\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">--- Main ---</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"2310\" y=\"0\"><field name=\"NAME\">Button.A</field><comment pinned=\"false\" h=\"80\" w=\"160\">--- Inputs (v2) ---</comment><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"turn_left\" functionid=\"2I7/)9-LeV;]ca%B[V_3\"></mutation></block></statement></block><block type=\"device_button_event\" x=\"2600\" y=\"0\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"turn_right\" functionid=\"LxL@O`|uxz/fj4!,xzG{\"></mutation></block></statement></block><block type=\"input_logo_event\" x=\"2865\" y=\"0\"><field name=\"action\">TouchButtonEvent.Pressed</field><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"reset_game\" functionid=\"$g~y:Bx{XUA9*nQwWfwH\"></mutation></block></statement></block><block type=\"function_definition\" x=\"3096\" y=\"0\"><mutation name=\"turn_left\" functionid=\"2I7/)9-LeV;]ca%B[V_3\"></mutation><field name=\"function_name\">turn_left</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"C+#c}iSq}ZB?]LqN9c](\">dir_</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"C+#c}iSq}ZB?]LqN9c](\">dir_</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value></block></statement></block><block type=\"function_definition\" x=\"3704\" y=\"0\"><mutation name=\"turn_right\" functionid=\"LxL@O`|uxz/fj4!,xzG{\"></mutation><field name=\"function_name\">turn_right</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"C+#c}iSq}ZB?]LqN9c](\">dir_</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"C+#c}iSq}ZB?]LqN9c](\">dir_</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"1485\"><mutation name=\"next_head\" functionid=\"jgxx60LZSc!!D@hl?.#0\"></mutation><field name=\"function_name\">next_head</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"x[eHJ_S,/)s;R$J#4J-(\">x2</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"eUiVXkbrVW/=M@PyBz%R\">y2</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let dx = dir_ == 1 ? 1 : (dir_ == 3 ? -1 : 0)\" numlines=\"1\" declaredvars=\"dx\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let dy = dir_ == 2 ? 1 : (dir_ == 0 ? -1 : 0)\" numlines=\"1\" declaredvars=\"dy\"></mutation><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">wrap(x2 + dx, W)</field></block></value><value name=\"ADD1\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">wrap(y2 + dy, H)</field></block></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"659\" y=\"1485\"><mutation name=\"on_snake\" functionid=\"/Fwz:^7)CAKj8o*sz0zd\"><arg name=\"x\" id=\"8ton2z6mkpoqwfh0l28wa\" type=\"number\"></arg><arg name=\"y\" id=\"i4wll16qj4daazo104cf\" type=\"number\"></arg></mutation><field name=\"function_name\">on_snake</field><value name=\"8ton2z6mkpoqwfh0l28wa\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">x</field></block></value><value name=\"i4wll16qj4daazo104cf\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">y</field></block></value><statement name=\"STACK\"><block type=\"device_while\"><value name=\"COND\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"O+fA+fd_ORY?bdiy}VNy\">i</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field></block></value></block></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"O+fA+fd_ORY?bdiy}VNy\">i</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">x</field></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"O+fA+fd_ORY?bdiy}VNy\">i</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">y</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></statement><next><block type=\"variables_change\"><field name=\"VAR\" id=\"O+fA+fd_ORY?bdiy}VNy\">i</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"2184\" y=\"1485\"><mutation name=\"place_food\" functionid=\"Eft~QPg/Xl|AJIVCj56%\"></mutation><field name=\"function_name\">place_food</field><statement name=\"STACK\"><block type=\"device_while\"><comment pinned=\"false\" h=\"80\" w=\"160\">ensure not on snake</comment><value name=\"COND\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow></value><statement name=\"DO\"><block type=\"variables_set\"><field name=\"VAR\" id=\"@wyaH+]GHHFEXQPEliGi\">x22</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8*D5rL5[~0fEG#XjED3~\">W</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"J84iL+dX_)gTwYA|,Ej7\">y22</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"=2G13Z8dsIG3,iuw9Dk+\">H</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"function_call_output\"><mutation name=\"on_snake\" functionid=\"/Fwz:^7)CAKj8o*sz0zd\"><arg name=\"x\" id=\"8ton2z6mkpoqwfh0l28wa\" type=\"number\"></arg><arg name=\"y\" id=\"i4wll16qj4daazo104cf\" type=\"number\"></arg></mutation><value name=\"8ton2z6mkpoqwfh0l28wa\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"@wyaH+]GHHFEXQPEliGi\">x22</field></block></value><value name=\"i4wll16qj4daazo104cf\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J84iL+dX_)gTwYA|,Ej7\">y22</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"break_keyword\"></block></statement></block></next></block></next></block></statement><next><block type=\"lists_index_set\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"NGGeK8KEI3pho(+xWes:\">food</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"@wyaH+]GHHFEXQPEliGi\">x22</field></block></value><next><block type=\"lists_index_set\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"NGGeK8KEI3pho(+xWes:\">food</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"J84iL+dX_)gTwYA|,Ej7\">y22</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2782\" y=\"1485\"><mutation name=\"draw\" functionid=\"948xe)ar~(mlEe%D7Q[8\"></mutation><field name=\"function_name\">draw</field><statement name=\"STACK\"><block type=\"device_clear_display\"><next><block type=\"variables_set\"><field name=\"VAR\" id=\"N8;o?M6u:e88E7}49C4?\">j</field><comment pinned=\"false\" h=\"80\" w=\"160\">draw body (dim)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"device_while\"><value name=\"COND\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"N8;o?M6u:e88E7}49C4?\">j</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field></block></value></block></value></block></value><statement name=\"DO\"><block type=\"device_plot_brightness\"><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"N8;o?M6u:e88E7}49C4?\">j</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"N8;o?M6u:e88E7}49C4?\">j</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"brightness\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">90</field></shadow></value><next><block type=\"variables_change\"><field name=\"VAR\" id=\"N8;o?M6u:e88E7}49C4?\">j</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement><next><block type=\"device_plot_brightness\"><comment pinned=\"false\" h=\"80\" w=\"160\">draw head (bright)</comment><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"brightness\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">255</field></shadow></value><next><block type=\"device_plot_brightness\"><comment pinned=\"false\" h=\"80\" w=\"160\">draw food (blink)</comment><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"NGGeK8KEI3pho(+xWes:\">food</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"NGGeK8KEI3pho(+xWes:\">food</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"brightness\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">food_blink ? 180 : 120</field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"2075\"><mutation name=\"game_over\" functionid=\"FtU!9*C/y;}O:M,;twlZ\"></mutation><field name=\"function_name\">game_over</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"KY2Flx0:~W2CzpE{%#T-\">alive</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Skull</field><next><block type=\"music_stop_all_sounds\"></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"353\" y=\"2075\"><mutation name=\"reset_game\" functionid=\"$g~y:Bx{XUA9*nQwWfwH\"></mutation><field name=\"function_name\">reset_game</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"KY2Flx0:~W2CzpE{%#T-\">alive</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"T0L`2B6_0+U^ktGBU3:r\">melody_started</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"C+#c}iSq}ZB?]LqN9c](\">dir_</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"oPnn#b2Zk?t|P#=A$F~R\">snake</field><comment pinned=\"false\" h=\"80\" w=\"160\">start heading right</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><value name=\"ADD1\"><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><value name=\"ADD2\"><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";e{_vnwfpe4Xv8cf:0Iy\">growing</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"zZ;$k19G7-E07RLK]U@(\">food_blink</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"function_call\"><mutation name=\"place_food\" functionid=\"Eft~QPg/Xl|AJIVCj56%\"></mutation><next><block type=\"function_call\"><mutation name=\"draw\" functionid=\"948xe)ar~(mlEe%D7Q[8\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>"}]},{"timestamp":1771749655807,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":44,"length1":44,"diffs":[[1,"//  Deadly walls + nice game-over melody\n"]]},{"start1":138,"length1":54,"diffs":[[1,""]]},{"start1":262,"length1":82,"diffs":[[1,"let DEATH_TEMPO = 140\n//  Tempo for the death melody\n"]]},{"start1":1353,"length1":292,"diffs":[[1,"//  A short, pleasant death jingle (feel free to change)\nlet DEATH_MELODY = \"C5:2 G4:1 E4:1 C4:2 R:1 C4:1 D4:1 E4:2 R:1 E4:1 F4:1 G4:4\"\n//  --- Game state ---\n"]]},{"start1":1532,"length1":79,"diffs":[[1,"let snake = [[0, 0]]\n"]]},{"start1":1589,"length1":18,"diffs":[[1,""]]},{"start1":1636,"length1":0,"diffs":[[1,"let food = [0, 0]\n"]]},{"start1":3097,"length1":78,"diffs":[[1,""]]},{"start1":3120,"length1":58,"diffs":[[1,"    //  Stop any long melody that might be playing so the death jingle is audible\n"]]},{"start1":3228,"length1":216,"diffs":[[1,"    //  Play the game-over melody\n    music.playMelody(DEATH_MELODY, DEATH_TEMPO)\n    basic.showIcon(IconNames.Skull)\n    //  (Leave sounds stopped at the end)\n    music.stopAllSounds()\n"]]},{"start1":3441,"length1":17,"diffs":[[1,""]]},{"start1":3665,"length1":82,"diffs":[[1,""]]},{"start1":3943,"length1":69,"diffs":[[1,"//  Run the loop in the background so inputs stay responsive\n"]]},{"start1":4440,"length1":25,"diffs":[[1,"                //  Eat food?\n"]]},{"start1":4840,"length1":142,"diffs":[[1,"                //  Start your long melody once when length > 5\n                if (!melody_started && snake.length > 5) {\n"]]},{"start1":5152,"length1":44,"diffs":[[1,""]]},{"start1":5187,"length1":49,"diffs":[[1,"                //  Pulse food and redraw\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":179,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]},{"type":"edited","filename":"main.py","patch":[{"start1":42,"length1":42,"diffs":[[1,"# Deadly walls + nice game-over melody\n"]]},{"start1":132,"length1":52,"diffs":[[1,""]]},{"start1":261,"length1":82,"diffs":[[1,"DEATH_TEMPO = 140       # Tempo for the death melody\n"]]},{"start1":1348,"length1":275,"diffs":[[1,"# A short, pleasant death jingle (feel free to change)\nDEATH_MELODY = \"C5:2 G4:1 E4:1 C4:2 R:1 C4:1 D4:1 E4:2 R:1 E4:1 F4:1 G4:4\"\n"]]},{"start1":1479,"length1":29,"diffs":[[1,"# --- Game state ---\n"]]},{"start1":1513,"length1":145,"diffs":[[1,"snake = [[0,0]]          # list of [x, y]; head at index 0\n"]]},{"start1":1624,"length1":0,"diffs":[[1,"food = [0, 0]\n"]]},{"start1":2136,"length1":44,"diffs":[[1,"def on_snake(x, y):\n"]]},{"start1":2877,"length1":76,"diffs":[[1,""]]},{"start1":2928,"length1":56,"diffs":[[1,"    # Stop any long melody that might be playing so the death jingle is audible\n"]]},{"start1":3036,"length1":215,"diffs":[[1,"    # Play the game-over melody\n    music.play_melody(DEATH_MELODY, DEATH_TEMPO)\n    basic.show_icon(IconNames.SKULL)\n    # (Leave sounds stopped at the end)\n    music.stop_all_sounds()\n"]]},{"start1":3249,"length1":17,"diffs":[[1,""]]},{"start1":3520,"length1":82,"diffs":[[1,""]]},{"start1":4273,"length1":27,"diffs":[[1,"                    # Eat food?\n"]]},{"start1":4617,"length1":149,"diffs":[[1,"                    # Start your long melody once when length > 5\n                    if (not melody_started) and len(snake) > 5:\n"]]},{"start1":4952,"length1":49,"diffs":[[1,""]]},{"start1":4953,"length1":51,"diffs":[[1,"                    # Pulse food and redraw\n"]]},{"start1":5103,"length1":94,"diffs":[[1,"# Run the loop in the background so inputs stay responsive\ncontrol.in_background(loop)\n\n\n"]]}]}]},{"timestamp":1771750255147,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":214,"length1":18,"diffs":[[1,"let TICK_MS = 300\n"]]},{"start1":4040,"length1":18,"diffs":[[1,""]]},{"start1":5059,"length1":34,"diffs":[[1,""]]},{"start1":5634,"length1":96,"diffs":[[1,"                    basic.showString(\"pHD\")\n"]]}]},{"type":"edited","filename":"main.py","patch":[{"start1":205,"length1":58,"diffs":[[1,"TICK_MS = 300           # Movement speed (lower = faster)\n"]]},{"start1":3699,"length1":75,"diffs":[[1,"    global alive, melody_started, dir_, snake, growing, food_blink\n"]]},{"start1":3950,"length1":18,"diffs":[[1,""]]},{"start1":4323,"length1":56,"diffs":[[1,"    global growing, melody_started, food_blink\n"]]},{"start1":4949,"length1":38,"diffs":[[1,""]]},{"start1":5479,"length1":101,"diffs":[[1,"                        basic.show_string(\"pHD\")\n"]]}]}]},{"timestamp":1771750611794,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.py","patch":[{"start1":4984,"length1":33,"diffs":[[1,"                        TICK_MS -= 50\n"]]}]}]},{"timestamp":1771752709013,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":5077,"length1":28,"diffs":[[1,"                    TICK_MS -= 50\n"]]}]}]},{"timestamp":1771752709102,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":3719,"length1":0,"diffs":[[1,"    //  Instantly restart the game (no pause, no skull)\n"]]},{"start1":3802,"length1":51,"diffs":[[1,""]]},{"start1":5077,"length1":56,"diffs":[[1,"                    TICK_MS\n"]]},{"start1":5349,"length1":142,"diffs":[[1,"                //  Start your long melody once when length > 7 (one-time trigger)\n                if (!melody_started && snake.length > 7) {\n"]]}]},{"type":"edited","filename":"main.py","patch":[{"start1":3582,"length1":0,"diffs":[[1,"    # Instantly restart the game (no pause, no skull)\n"]]},{"start1":3663,"length1":55,"diffs":[[1,""]]},{"start1":4984,"length1":51,"diffs":[[1,"                        TICK_MS \n"]]},{"start1":5193,"length1":149,"diffs":[[1,"                    # Start your long melody once when length > 7 (one-time trigger)\n                    if (not melody_started) and len(snake) > 7:\n"]]}]}]},{"timestamp":1771753122162,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":44,"length1":49,"diffs":[[1,"//  Deadly walls + macabre game-over melody\n"]]},{"start1":319,"length1":72,"diffs":[[1,"let DEATH_TEMPO = 132\n//  Tempo for the death melody (slightly brisk for urgency)\n"]]},{"start1":1439,"length1":210,"diffs":[[1,"//  A darker, macabre death melody (chromatic/minor descent + diminished color)\n//  Feel free to tweak: lower notes and semitone steps tend to sound ominous.\nlet DEATH_MELODY = \"C5:2 B4:1 A#4:1 A4:1 G#4:1 G4:2 R:1 F#4:1 G4:1 D#4:2 D4:2 C4:3 R:1 C4:1 G3:1 C4:3\"\n"]]},{"start1":1751,"length1":0,"diffs":[[1,"//  Properly typed containers for MakeCode Python:\n"]]},{"start1":3374,"length1":122,"diffs":[[1,"    //  Play darker death melody and restart immediately (no \"Hi Zhi!\" again)\n"]]},{"start1":3559,"length1":237,"diffs":[[1,"    //  Play the macabre death melody in the background\n    control.inBackground(function _death() {\n        music.playMelody(DEATH_MELODY, DEATH_TEMPO)\n    })\n"]]},{"start1":3746,"length1":0,"diffs":[[1,"    // show skull FOR 1000ms\n    basic.pause(1000)\n"]]},{"start1":4056,"length1":27,"diffs":[[1,""]]},{"start1":5072,"length1":54,"diffs":[[1,""]]},{"start1":5703,"length1":0,"diffs":[[1,"                    basic.showString(\"PhD! Dr. Zhi! PhD! Dr. Zhi! PhD! Dr. Zhi! PhD! Dr. Zhi!\")\n"]]}]},{"type":"edited","filename":"main.py","patch":[{"start1":42,"length1":47,"diffs":[[1,"# Deadly walls + macabre game-over melody\n"]]},{"start1":316,"length1":72,"diffs":[[1,"DEATH_TEMPO = 132       # Tempo for the death melody (slightly brisk for urgency)\n"]]},{"start1":1432,"length1":202,"diffs":[[1,"# A darker, macabre death melody (chromatic/minor descent + diminished color)\n# Feel free to tweak: lower notes and semitone steps tend to sound ominous.\nDEATH_MELODY = (\n    \"C5:2 B4:1 A#4:1 A4:1 G#4:1 G4:2 R:1 \"\n    \"F#4:1 G4:1 D#4:2 D4:2 C4:3 R:1 \"\n    \"C4:1 G3:1 C4:3\"\n)\n"]]},{"start1":1750,"length1":0,"diffs":[[1,"# Properly typed containers for MakeCode Python:\n"]]},{"start1":3210,"length1":118,"diffs":[[1,"    # Play darker death melody and restart immediately (no \"Hi Zhi!\" again)\n"]]},{"start1":3337,"length1":1,"diffs":[[1,""]]},{"start1":3422,"length1":184,"diffs":[[1,"    # Play the macabre death melody in the background\n    def _death():\n        music.play_melody(DEATH_MELODY, DEATH_TEMPO)\n    control.in_background(_death)\n"]]},{"start1":3582,"length1":47,"diffs":[[1,""]]},{"start1":3609,"length1":0,"diffs":[[1,"\n    #show skull FOR 1000ms\n    basic.pause(1000)\n    \n"]]},{"start1":3700,"length1":76,"diffs":[[1,"    global alive, melody_started, dir_, snake, growing, food_blink,TICK_MS\n"]]},{"start1":3959,"length1":44,"diffs":[[1,"    TICK_MS = 700\n"]]},{"start1":4985,"length1":109,"diffs":[[1,"                        TICK_MS = int(TICK_MS*0.8)\n"]]},{"start1":5566,"length1":0,"diffs":[[1,"                        basic.show_string(\"PhD! Dr. Zhi! PhD! Dr. Zhi! PhD! Dr. Zhi! PhD! Dr. Zhi!\")\n"]]},{"start1":5892,"length1":28,"diffs":[[1,"control.in_background(loop)"]]}]}]},{"timestamp":1771753900792,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":179,"length1":44,"diffs":[[1,""]]}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"},{"type":"added","filename":"main.blocks","value":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>"}]}],"snapshots":[{"timestamp":1771744313711,"editorVersion":"8.0.18","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"Zhi\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1771746131010,"editorVersion":"8.0.18","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\"></block></xml>","main.ts":"","README.md":"","main.py":"# MakeCode Python\nfrom microbit import *\nimport music\n\n#https://onlinesequencer.net/1631218\nMELODY_STR = \"A#4:27 C5:1 R:1 C5:1 R:1 C3:19 R:12 A#4:1 R:1 C5:1 R:1 C5:1 R:1 C3:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:4 C7:1 R:1 D7:1 R:1 A#6:1 R:1 G6:1 R:1 G6:4 R:1 F6:1 R:1 G6:4 R:9 C7:1 R:1 C7:1 R:1 C7:1 R:1 D7:1 R:1 D#7:1 R:1 D7:4 A#4:1 R:1 C7:1 R:1 C5:1 R:1 D#7:1 R:3 D#7:1 R:3 D#7:1 R:1 D#7:1 R:1 F7:1 R:1 D#7:1 R:1 D7:1 R:3 D7:1 R:7 C7:1 R:1 D7:1 R:1 G7:1 R:3 G7:1 R:3 D#7:1 R:1 D#7:1 R:1 F7:1 R:1 D#7:1 R:1 G7:1 R:3 G7:1 R:5 G7:1 R:1 F7:1 R:1 D#7:1 R:3 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:5 C7:1 R:1 B6:1 R:1 C7:1 R:1 D7:1 R:3 G7:1 R:3 F7:1 R:1 D#7:1 R:1 D#6:1 R:1 D#7:1 R:1 D#7:1 R:1 D#7:1 R:1 D#7:1 R:5 D#7:1 R:1 F7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:11 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 B6:1 R:1 C7:1 R:1 D7:1 R:4 D#7:1 R:1 F7:1 R:1 G7:1 R:1 G7:1 R:6 F7:1 D#7:1 F7:1 D#7:1 R:6 G7:1 R:1 G#7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:1 G#7:1 R:1 G7:1 R:3 C6:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:1 C7:1 R:3 C7:1 R:1 D7:1 R:1 A#6:1 R:1 G6:1 R:1 G6:1 R:2 F6:1 R:1 G6:1\"\n\nmelody = music.stringPlayable(MELODY_STR, 92)\n\nmusic.play(melody, music.PlaybackMode.IN_BACKGROUND)","pxt.json":"{\n    \"name\": \"Zhi\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"pyprj\"\n}\n"}},{"timestamp":1771748251447,"editorVersion":"8.0.18","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"e!YqMXw1!#Oy,phm/IL,\">treasure_x</variable><variable id=\"~%=F|Z0[D6|rRJfTL(q7\">treasure_y</variable><variable id=\"CUGk(Lh0%#s%.~4/v@xO\">x</variable><variable id=\"b;w=f/1yf]d6)^MTQb?F\">arr</variable><variable id=\"u{jvy_#UL{p;]/pUsp}i\">y</variable><variable id=\"7+,0AQQ(NlI]?HbE[t%,\">wait</variable><variable id=\"gz;=lYL0/vn^EC64I|19\">x1</variable><variable id=\"V-!B~3+jhJRB)d]j-iQf\">y1</variable><variable id=\"fzo*-9ESIErHA|=S+uYv\">x_add</variable><variable id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</variable><variable id=\"4GQ|m?;^ke!ju_EbASU1\">i</variable><variable id=\"z(IdM^+8_1=4_Qw.6AFI\">MELODY_STR</variable><variable id=\"zfbizB18r}nWI!l8%{=r\">melody</variable></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"e!YqMXw1!#Oy,phm/IL,\">treasure_x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~%=F|Z0[D6|rRJfTL(q7\">treasure_y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7+,0AQQ(NlI]?HbE[t%,\">wait</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">500</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"1\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"z(IdM^+8_1=4_Qw.6AFI\">MELODY_STR</field><comment pinned=\"false\" h=\"80\" w=\"160\">https://onlinesequencer.net/1631218</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">A#3:2 C4:1 R:1 C4:1 R:1 C2:1 R:12 A#3:1 R:1 C4:1 R:1 C4:1 R:1 C2:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:4 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:4 R:1 F5:1 R:1 G5:4 R:9 C6:1 R:1 C6:1 R:1 C6:1 R:1 D6:1 R:1 D#6:1 R:1 D6:4 A#3:1 R:1 C6:1 R:1 C4:1 R:1 D#6:1 R:3 D#6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 D6:1 R:3 D6:1 R:7 C6:1 R:1 D6:1 R:1 G6:1 R:3 G6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 G6:1 R:3 G6:1 R:5 G6:1 R:1 F6:1 R:1 D#6:1 R:3 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:5 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:3 G6:1 R:3 F6:1 R:1 D#6:1 R:1 D#5:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:5 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:11 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:4 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G6:1 R:6 F6:1 D#6:1 F6:1 D#6:1 R:6 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:3 C5:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:3 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:1 R:2 F5:1 R:1 G5:1</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"zfbizB18r}nWI!l8%{=r\">melody</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"music_string_playable\"><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"- - - - - - - - \"</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"z(IdM^+8_1=4_Qw.6AFI\">MELODY_STR</field></block></value><value name=\"bpm\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">120</field></shadow></value></block></value><next><block type=\"music_playable_play\"><field name=\"playbackMode\">music.PlaybackMode.InBackground</field><value name=\"toPlay\"><shadow type=\"music_string_playable\"></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"zfbizB18r}nWI!l8%{=r\">melody</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"793\" y=\"20\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value></block></next></block></statement></block></statement></block><block type=\"device_button_event\" x=\"1255\" y=\"20\"><field name=\"NAME\">Button.AB</field><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"1\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></statement></block><block type=\"device_button_event\" x=\"1676\" y=\"20\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement></block></statement></block><block type=\"device_forever\" x=\"2138\" y=\"20\"><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"generateImage\" functionid=\"=5P%#Rj?llY8ezftvE56\"></mutation><next><block type=\"function_call\"><mutation name=\"moveForward\" functionid=\"1!En`2DLGFDQ@g`vJ`SS\"></mutation></block></next></block></statement></block><block type=\"device_forever\" x=\"2375\" y=\"20\"><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"showTreasure\" functionid=\"NYNH;ItGhr+RMnl=q3e{\"></mutation></block></statement></block><block type=\"function_definition\" x=\"20\" y=\"537\"><mutation name=\"showTreasure\" functionid=\"NYNH;ItGhr+RMnl=q3e{\"></mutation><field name=\"function_name\">showTreasure</field><comment pinned=\"false\" h=\"80\" w=\"160\">MakeCode Python</comment><statement name=\"STACK\"><block type=\"device_plot\"><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"e!YqMXw1!#Oy,phm/IL,\">treasure_x</field></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~%=F|Z0[D6|rRJfTL(q7\">treasure_y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"CUGk(Lh0%#s%.~4/v@xO\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"u{jvy_#UL{p;]/pUsp}i\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"CUGk(Lh0%#s%.~4/v@xO\">x</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"e!YqMXw1!#Oy,phm/IL,\">treasure_x</field></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u{jvy_#UL{p;]/pUsp}i\">y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~%=F|Z0[D6|rRJfTL(q7\">treasure_y</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"value\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"e!YqMXw1!#Oy,phm/IL,\">treasure_x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~%=F|Z0[D6|rRJfTL(q7\">treasure_y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value></block></next></block></next></block></statement></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"867\" y=\"537\"><mutation name=\"moveForward\" functionid=\"1!En`2DLGFDQ@g`vJ`SS\"></mutation><field name=\"function_name\">moveForward</field><statement name=\"STACK\"><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7+,0AQQ(NlI]?HbE[t%,\">wait</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"gz;=lYL0/vn^EC64I|19\">x1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"V-!B~3+jhJRB)d]j-iQf\">y1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"gz;=lYL0/vn^EC64I|19\">x1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"gz;=lYL0/vn^EC64I|19\">x1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"gz;=lYL0/vn^EC64I|19\">x1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"gz;=lYL0/vn^EC64I|19\">x1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fzo*-9ESIErHA|=S+uYv\">x_add</field></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"V-!B~3+jhJRB)d]j-iQf\">y1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"V-!B~3+jhJRB)d]j-iQf\">y1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"V-!B~3+jhJRB)d]j-iQf\">y1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"V-!B~3+jhJRB)d]j-iQf\">y1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~^3@UzUOb.6Pcb;[g9-J\">y_add</field></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></statement><next><block type=\"array_insertAt\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"index\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"value\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"gz;=lYL0/vn^EC64I|19\">x1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"V-!B~3+jhJRB)d]j-iQf\">y1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></value><next><block type=\"array_removeat_statement\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"index\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1555\" y=\"537\"><mutation name=\"generateImage\" functionid=\"=5P%#Rj?llY8ezftvE56\"></mutation><field name=\"function_name\">generateImage</field><statement name=\"STACK\"><block type=\"device_clear_display\"><next><block type=\"device_while\"><value name=\"COND\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4GQ|m?;^ke!ju_EbASU1\">i</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO\"><block type=\"variables_set\"><field name=\"VAR\" id=\"CUGk(Lh0%#s%.~4/v@xO\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4GQ|m?;^ke!ju_EbASU1\">i</field></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"u{jvy_#UL{p;]/pUsp}i\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b;w=f/1yf]d6)^MTQb?F\">arr</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4GQ|m?;^ke!ju_EbASU1\">i</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></value><next><block type=\"device_plot\"><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"CUGk(Lh0%#s%.~4/v@xO\">x</field></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u{jvy_#UL{p;]/pUsp}i\">y</field></block></value><next><block type=\"variables_change\"><field name=\"VAR\" id=\"4GQ|m?;^ke!ju_EbASU1\">i</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></statement></block></next></block></statement></block></xml>","main.ts":"","README.md":"","main.py":"# MakeCode Python\ndef showTreasure():\n    global x, y, treasure_x, treasure_y\n    led.plot(treasure_x, treasure_y)\n    x = arr[0] % 5\n    y = int(arr[0] / 5)\n    if x == treasure_x and y == treasure_y:\n        arr.append(arr[0])\n        treasure_x = randint(0, 4)\n        treasure_y = randint(0, 4)\ndef moveForward():\n    global x1, y1\n    basic.pause(wait)\n    x1 = arr[0] % 5\n    y1 = int(arr[0] / 5)\n    if x1 + x_add < 0:\n        x1 = 4\n    else:\n        x1 = (x1 + x_add) % 5\n    if y1 + y_add < 0:\n        y1 = 4\n    else:\n        y1 = (y1 + y_add) % 5\n    arr.insert_at(0, x1 + y1 * 5)\n    arr.remove_at(len(arr) - 1)\ndef generateImage():\n    global x, y, i\n    basic.clear_screen()\n    while i <= len(arr) - 1:\n        x = arr[i] % 5\n        y = int(arr[i] / 5)\n        led.plot(x, y)\n        i += 1\n\ndef on_button_pressed_a():\n    global x_add, y_add\n    if x_add == 0:\n        x_add = -1\n        y_add = 0\n    elif y_add == 0:\n        x_add = 0\n        y_add = -1\ninput.on_button_pressed(Button.A, on_button_pressed_a)\n\ndef on_button_pressed_ab():\n    global arr\n    arr = [0]\ninput.on_button_pressed(Button.AB, on_button_pressed_ab)\n\ndef on_button_pressed_b():\n    global x_add, y_add\n    if x_add == 0:\n        x_add = 1\n        y_add = 0\n    elif y_add == 0:\n        x_add = 0\n        y_add = 1\ninput.on_button_pressed(Button.B, on_button_pressed_b)\n\ni = 0\nx_add = 0\ny1 = 0\nx1 = 0\ny = 0\nx = 0\narr: List[number] = []\nwait = 0\ny_add = 0\ntreasure_y = 0\ntreasure_x = 0\ntreasure_x = randint(0, 4)\ntreasure_y = randint(0, 4)\ny_add = 1\nwait = 500\narr = [0]\n# https://onlinesequencer.net/1631218\n#MELODY_STR = \"A#3:2 C4:1 R:1 C4:1 R:1 C2:1 R:12 A#3:1 R:1 C4:1 R:1 C4:1 R:1 C2:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:4 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:4 R:1 F5:1 R:1 G5:4 R:9 C6:1 R:1 C6:1 R:1 C6:1 R:1 D6:1 R:1 D#6:1 R:1 D6:4 A#3:1 R:1 C6:1 R:1 C4:1 R:1 D#6:1 R:3 D#6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 D6:1 R:3 D6:1 R:7 C6:1 R:1 D6:1 R:1 G6:1 R:3 G6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 G6:1 R:3 G6:1 R:5 G6:1 R:1 F6:1 R:1 D#6:1 R:3 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:5 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:3 G6:1 R:3 F6:1 R:1 D#6:1 R:1 D#5:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:5 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:11 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:4 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G6:1 R:6 F6:1 D#6:1 F6:1 D#6:1 R:6 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:3 C5:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:3 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:1 R:2 F5:1 R:1 G5:1\"\n#melody = music.string_playable(MELODY_STR, 120)\n#music.play(melody, music.PlaybackMode.IN_BACKGROUND)\n\ndef on_forever():\n    generateImage()\n    moveForward()\nbasic.forever(on_forever)\n\ndef on_forever2():\n    showTreasure()\nbasic.forever(on_forever2)\n","pxt.json":"{\n    \"name\": \"Zhi\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"pyprj\"\n}\n"}},{"timestamp":1771750161723,"editorVersion":"8.0.18","text":{"main.ts":"","main.py":"# Snake on micro:bit v2 (MakeCode Python)\n# Deadly walls + nice game-over melody\n# Plays your (lowered) long melody once length > 5\n# Shows \"Hi Zhi!\" at startup\n\n# --- Config ---\nTICK_MS = 300           # Movement speed (lower = faster)\nTEMPO_BPM = 120         # Tempo for your long melody\nDEATH_TEMPO = 140       # Tempo for the death melody\n\n# Your provided melody (one octave lower)\nMELODY_STR = \"A#3:2 C4:1 R:1 C4:1 R:1 C2:1 R:12 A#3:1 R:1 C4:1 R:1 C4:1 R:1 C2:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:4 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:4 R:1 F5:1 R:1 G5:4 R:9 C6:1 R:1 C6:1 R:1 C6:1 R:1 D6:1 R:1 D#6:1 R:1 D6:4 A#3:1 R:1 C6:1 R:1 C4:1 R:1 D#6:1 R:3 D#6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 D6:1 R:3 D6:1 R:7 C6:1 R:1 D6:1 R:1 G6:1 R:3 G6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 G6:1 R:3 G6:1 R:5 G6:1 R:1 F6:1 R:1 D#6:1 R:3 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:5 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:3 G6:1 R:3 F6:1 R:1 D#6:1 R:1 D#5:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:5 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:11 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:4 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G6:1 R:6 F6:1 D#6:1 F6:1 D#6:1 R:6 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:3 C5:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:3 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:1 R:2 F5:1 R:1 G5:1\"\n\n# A short, pleasant death jingle (you can change this)\nDEATH_MELODY = \"C5:2 G4:1 E4:1 C4:2 R:1 C4:1 D4:1 E4:2 R:1 E4:1 F4:1 G4:4\"\n\n# --- Game state & Types ---\nW = 5\nH = 5\n\n# Properly typed containers for MakeCode Python:\nsnake: List[List[number]] = []   # list of [x, y]; head at index 0\nfood: List[number] = [0, 0]\n\ndir_ = 1            # 0=up, 1=right, 2=down, 3=left\ngrowing = 0\nalive = True\nmelody_started = False\nfood_blink = False  # for pulsing the food dot\n\n# --- Helpers ---\ndef turn_left():\n    global dir_\n    dir_ = (dir_ + 3) % 4\n\ndef turn_right():\n    global dir_\n    dir_ = (dir_ + 1) % 4\n\ndef next_head():\n    # No wrapping: we just compute the next cell and check walls in the loop\n    x = snake[0][0]\n    y = snake[0][1]\n    dx = 1 if dir_ == 1 else (-1 if dir_ == 3 else 0)\n    dy = 1 if dir_ == 2 else (-1 if dir_ == 0 else 0)\n    return [x + dx, y + dy]\n\ndef on_snake(x: number, y: number) -> bool:\n    k = 0\n    while k < len(snake):\n        if snake[k][0] == x and snake[k][1] == y:\n            return True\n        k += 1\n    return False\n\ndef place_food():\n    # ensure not on snake\n    while True:\n        x = randint(0, W - 1)\n        y = randint(0, H - 1)\n        if not on_snake(x, y):\n            food[0] = x\n            food[1] = y\n            break\n\ndef draw():\n    basic.clear_screen()\n    # draw body (dim)\n    k = 1\n    while k < len(snake):\n        led.plot_brightness(snake[k][0], snake[k][1], 90)\n        k += 1\n    # draw head (bright)\n    led.plot_brightness(snake[0][0], snake[0][1], 255)\n    # draw food (blink)\n    led.plot_brightness(food[0], food[1], 180 if food_blink else 120)\n\ndef game_over():\n    global alive, melody_started\n    alive = False\n    # Stop any long melody so the death jingle is clean\n    music.stop_all_sounds()\n    music.play_melody(DEATH_MELODY, DEATH_TEMPO)\n    basic.show_icon(IconNames.SKULL)\n    music.stop_all_sounds()\n    melody_started = False\n\ndef reset_game():\n    global alive, melody_started, dir_, snake, growing, food_blink\n    alive = True\n    melody_started = False\n    dir_ = 1  # start heading right\n    snake = [[2, 2], [1, 2], [0, 2]]\n    growing = 0\n    food_blink = False\n    place_food()\n    draw()\n\n# --- Startup message ---\nbasic.show_string(\"Hi Zhi!\")\n\n# --- Inputs (v2) ---\ndef on_a():\n    turn_left()\ninput.on_button_pressed(Button.A, on_a)\n\ndef on_b():\n    turn_right()\ninput.on_button_pressed(Button.B, on_b)\n\ndef on_logo():\n    reset_game()\ninput.on_logo_event(TouchButtonEvent.PRESSED, on_logo)\n\n# --- Main ---\nreset_game()\n\ndef loop():\n    global growing, melody_started, food_blink\n    while True:\n        if alive:\n            nh = next_head()\n\n            # --- Deadly walls ---\n            if nh[0] < 0 or nh[0] >= W or nh[1] < 0 or nh[1] >= H:\n                game_over()\n            else:\n                # Self collision\n                if on_snake(nh[0], nh[1]):\n                    game_over()\n                else:\n                    # Move\n                    snake.insert(0, nh)\n\n                    # Eat\n                    if nh[0] == food[0] and nh[1] == food[1]:\n                        growing += 1\n                        place_food()\n\n                    # Grow or trim\n                    if growing > 0:\n                        growing -= 1\n                    else:\n                        snake.pop()\n\n                    # Start your long melody once when length > 5\n                    if (not melody_started) and len(snake) > 5:\n                        melody_started = True\n                        def _play():\n                            music.play_melody(MELODY_STR, TEMPO_BPM)\n                        control.in_background(_play)\n\n                    # Pulse food & redraw\n                    food_blink = not food_blink\n                    draw()\n\n        basic.pause(TICK_MS)\n\n# Run the game loop in background to keep inputs responsive\ncontrol.in_background(loop)","pxt.json":"{\n    \"name\": \"Zhi\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"pyprj\"\n}\n"}},{"timestamp":1771752709013,"editorVersion":"8.0.18","text":{"main.ts":"","main.py":"# Snake on micro:bit v2 (MakeCode Python)\n# Deadly walls + macabre game-over melody\n# Plays your (lowered) long melody once length > 5\n# Shows \"Hi Zhi!\" only at startup (not on restarts)\n\n# --- Config ---\nTICK_MS = 700           # Movement speed (lower = faster)\nTEMPO_BPM = 120         # Tempo for your long melody\nDEATH_TEMPO = 132       # Tempo for the death melody (slightly brisk for urgency)\n\n# Your provided melody (one octave lower)\nMELODY_STR = \"A#3:2 C4:1 R:1 C4:1 R:1 C2:1 R:12 A#3:1 R:1 C4:1 R:1 C4:1 R:1 C2:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:4 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:4 R:1 F5:1 R:1 G5:4 R:9 C6:1 R:1 C6:1 R:1 C6:1 R:1 D6:1 R:1 D#6:1 R:1 D6:4 A#3:1 R:1 C6:1 R:1 C4:1 R:1 D#6:1 R:3 D#6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 D6:1 R:3 D6:1 R:7 C6:1 R:1 D6:1 R:1 G6:1 R:3 G6:1 R:3 D#6:1 R:1 D#6:1 R:1 F6:1 R:1 D#6:1 R:1 G6:1 R:3 G6:1 R:5 G6:1 R:1 F6:1 R:1 D#6:1 R:3 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:5 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:3 G6:1 R:3 F6:1 R:1 D#6:1 R:1 D#5:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:1 D#6:1 R:5 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:11 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 B5:1 R:1 C6:1 R:1 D6:1 R:4 D#6:1 R:1 F6:1 R:1 G6:1 R:1 G6:1 R:6 F6:1 D#6:1 F6:1 D#6:1 R:6 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:1 G#6:1 R:1 G6:1 R:3 C5:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:1 C6:1 R:3 C6:1 R:1 D6:1 R:1 A#5:1 R:1 G5:1 R:1 G5:1 R:2 F5:1 R:1 G5:1\"\n\n# A darker, macabre death melody (chromatic/minor descent + diminished color)\n# Feel free to tweak: lower notes and semitone steps tend to sound ominous.\nDEATH_MELODY = (\n    \"C5:2 B4:1 A#4:1 A4:1 G#4:1 G4:2 R:1 \"\n    \"F#4:1 G4:1 D#4:2 D4:2 C4:3 R:1 \"\n    \"C4:1 G3:1 C4:3\"\n)\n\n# --- Game state & Types ---\nW = 5\nH = 5\n\n# Properly typed containers for MakeCode Python:\nsnake: List[List[number]] = []   # list of [x, y]; head at index 0\nfood: List[number] = [0, 0]\n\ndir_ = 1            # 0=up, 1=right, 2=down, 3=left\ngrowing = 0\nalive = True\nmelody_started = False\nfood_blink = False  # for pulsing the food dot\n\n# --- Helpers ---\ndef turn_left():\n    global dir_\n    dir_ = (dir_ + 3) % 4\n\ndef turn_right():\n    global dir_\n    dir_ = (dir_ + 1) % 4\n\ndef next_head():\n    # No wrapping: compute next cell; wall check is done in the loop\n    x = snake[0][0]\n    y = snake[0][1]\n    dx = 1 if dir_ == 1 else (-1 if dir_ == 3 else 0)\n    dy = 1 if dir_ == 2 else (-1 if dir_ == 0 else 0)\n    return [x + dx, y + dy]\n\ndef on_snake(x: number, y: number) -> bool:\n    k = 0\n    while k < len(snake):\n        if snake[k][0] == x and snake[k][1] == y:\n            return True\n        k += 1\n    return False\n\ndef place_food():\n    # ensure not on snake\n    while True:\n        x = randint(0, W - 1)\n        y = randint(0, H - 1)\n        if not on_snake(x, y):\n            food[0] = x\n            food[1] = y\n            break\n\ndef draw():\n    basic.clear_screen()\n    # draw body (dim)\n    k = 1\n    while k < len(snake):\n        led.plot_brightness(snake[k][0], snake[k][1], 90)\n        k += 1\n    # draw head (bright)\n    led.plot_brightness(snake[0][0], snake[0][1], 255)\n    # draw food (blink)\n    led.plot_brightness(food[0], food[1], 180 if food_blink else 120)\n\ndef game_over():\n    # Play darker death melody and restart immediately (no \"Hi Zhi!\" again)\n    global alive, melody_started\n    alive = False\n    # Stop any long melody so the death jingle is clean\n    music.stop_all_sounds()\n\n    # Play the macabre death melody in the background\n    def _death():\n        music.play_melody(DEATH_MELODY, DEATH_TEMPO)\n    control.in_background(_death)\n\n    # Instantly restart the game (no pause, no skull)\n    melody_started = False\n    reset_game()\n\ndef reset_game():\n    global alive, melody_started, dir_, snake, growing, food_blink,TICK_MS\n    alive = True\n    melody_started = False\n    dir_ = 1  # start heading right\n    snake = [[2, 2], [1, 2], [0, 2]]\n    growing = 0\n    food_blink = False\n    place_food()\n    draw()\n    TICK_MS = 700\n\n# --- Startup message (shown only once on boot) ---\nbasic.show_string(\"Hi Zhi!\")\n\n# --- Inputs (v2) ---\ndef on_a():\n    turn_left()\ninput.on_button_pressed(Button.A, on_a)\n\ndef on_b():\n    turn_right()\ninput.on_button_pressed(Button.B, on_b)\n\ndef on_logo():\n    reset_game()\ninput.on_logo_event(TouchButtonEvent.PRESSED, on_logo)\n\n# --- Main ---\nreset_game()\n\ndef loop():\n    global growing, melody_started, food_blink, TICK_MS\n    while True:\n        if alive:\n            nh = next_head()\n\n            # --- Deadly walls ---\n            if nh[0] < 0 or nh[0] >= W or nh[1] < 0 or nh[1] >= H:\n                game_over()\n            else:\n                # Self collision?\n                if on_snake(nh[0], nh[1]):\n                    game_over()\n                else:\n                    # Move head\n                    snake.insert(0, nh)\n\n                    # Eat?\n                    if nh[0] == food[0] and nh[1] == food[1]:\n                        growing += 1\n                        place_food()\n                        TICK_MS -= 50\n\n                    # Grow or pop tail\n                    if growing > 0:\n                        growing -= 1\n                    else:\n                        snake.pop()\n\n                    # Start your long melody once when length > 7 (one-time trigger)\n                    if (not melody_started) and len(snake) > 7:\n                        melody_started = True\n                        def _play():\n                            music.play_melody(MELODY_STR, TEMPO_BPM)\n                        control.in_background(_play)\n                        basic.show_string(\"PhD! Dr. Zhi! PhD! Dr. Zhi! PhD! Dr. Zhi! PhD! Dr. Zhi!\")\n\n                    # Toggle food blink and redraw\n                    food_blink = not food_blink\n                    draw()\n\n        basic.pause(TICK_MS)\n\n# Run movement/game loop in background so inputs remain responsive\ncontrol.in_background(loop)","pxt.json":"{\n    \"name\": \"Zhi\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"pyprj\"\n}\n"}}],"shares":[],"lastSaveTime":1771753900802}